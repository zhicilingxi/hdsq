<include file="Common/header" />
<!--页面独立css和js引入区-->
<link href="__PUBLIC__/web/css/self-service.css" type="text/css" rel="stylesheet"><!--我的小区等页面独立样式-->
<!--*********************header 引入区 end*********************-->
<script src="__PUBLIC__/web/js/Component.js" type="text/javascript"></script>

<!--*********************contanier 内容区 *********************-->
<div class="layout container-minheight clearfix">
  <div class="web-step">
     <a target="_blank" href="{:C('scurl')['INDEX_INDEX']}">首页 ></a>
     <a href="{:C('scurl')['DESIGNER_INDEX']}djys.html">实创特色></a>
     <a>免费服务</a>
   </div>
   <div class="book-wrap clearfix">
   		<ul class="demo-TabName">
        	<li <?php if($a==1 ) {echo 'class="t-active"';}?>>自助预约</li>
            <li <?php if($b==1 ) {echo 'class="t-active"';}?>>装修报价</li>
            <li <?php if($e==1 ) {echo 'class="t-active"';}?>>申请参观工地</li>
        </ul>
        <div class="book-body demo-TabWrap clearfix">

        	<div class="demo-TabBody book-1 clearfix">
            	<div class="form-area clearfix">
                	<div class="bg"></div>
                    <div class="area-book clearfix">
                    	<p>目前已累计<em id="formnum1">{$count}</em>位业主预约成功</p>
                      <form class="rightform1" method="post">
                        
                        <div class="input-1">
                          <input type="hidden" name="type" value="4">
                        	<input type="text" id="username" placeholder="请输入您的姓名" name="username"/>
                          <input type="text" id="telephone" placeholder="请输入您的电话" name="telephone"  maxlength="11"/>
                        </div>
                        <div class="input-2 clearfix" style="margin-bottom: 10px;">
                           <input type="text" id="community" placeholder="请输入您的小区名称" name="community"/>
                          <input type="text"  id="area" placeholder="请输入您的装修面积" name="area"/>
                        </div>
                        <div class="input-3">
                        	<textarea name="requirement" placeholder="请您详细描述您想要的设计风格，装修要点等具体要求。"></textarea>
                        </div>
                        <div class="input-btn">
                        <input style="width: 160px;height: 30px;line-height: 30px;text-align: center;background: #fa4c06;display: block;color: #fff;margin: 15px 0;border: none;" type="button" id="sm1" onclick="$('.rightform1').submit();" value="免费预约">
                        	<!-- <a href="#">免费预约</a> -->
                        </div>
                        </form>
                        <p class="warn">为了您的利益以及我们的口碑，您的隐私将被严格保密。</p>
                    </div>
                </div>
            </div>

            <div class="demo-TabBody book-2 clearfix">
            	<div class="form-area clearfix">
                	<div class="bg"></div>
                    <div class="area-book clearfix">
                    	<p>目前已累计<em id="formnum2">{$count1}</em>位业主预约成功</p>
                        <form class="rightform2" method="post">
                        
                        <div class="input-1">
                          <input type="hidden" name="type" value="1">
                          <input type="text" id="username" placeholder="请输入您的姓名" name="username"/>
                          <input type="text" id="telephone" placeholder="请输入您的电话" name="telephone" maxlength="11"/>
                        </div>
                        <div class="input-2 clearfix" style="margin-bottom: 10px;">
                           <input type="text" id="community" placeholder="请输入您的小区名称" name="community"/>
                          <input type="text"  id="area" placeholder="请输入您的装修面积" name="area"/>
                        </div>
                        <div class="input-3">
                          <textarea name="requirement" placeholder="请您详细描述您想要的设计风格，装修要点等具体要求。"></textarea>
                        </div>
                        <div class="input-btn">
                        <input style="width: 160px;height: 30px;line-height: 30px;text-align: center;background: #fa4c06;display: block;color: #fff;margin: 15px 0;border: none;" type="button" id="sm2" onclick="$('.rightform2').submit();" value="立即申请">
                          <!-- <a href="#">免费预约</a> -->
                        </div>
                        </form>
                        <p class="warn clearfix">为了您的利益以及我们的口碑，您的隐私将被严格保密。</p>
                    </div>
                </div>
            </div>
            <div class="demo-TabBody book-3 clearfix">
            	<div class="form-area clearfix">
                	<div class="bg"></div>
                    <div class="area-book clearfix">
                    	<p>目前已累计<em id="formnum3">{$count2}</em>位业主预约成功</p>
                        <form class="rightform3" method="post">
                        
                        <div class="input-1">
                          <input type="hidden" name="type" value="2">
                          <input type="text" id="username" placeholder="请输入您的姓名" name="username"/>
                          <input type="text" id="telephone" placeholder="请输入您的电话" name="telephone"/>
                        </div>
                        <div class="input-2 clearfix" style="margin-bottom: 10px;">
                           <input type="text" id="community" placeholder="请输入您的小区名称" name="community"/>
                          <input type="text"  id="area" placeholder="请输入您的装修面积" name="area"/>
                        </div>
                        <div class="input-3">
                          <textarea name="requirement" placeholder="请您详细描述您想要的设计风格，装修要点等具体要求。"></textarea>
                        </div>
                        <div class="input-btn">
                        <input style="width: 160px;height: 30px;line-height: 30px;text-align: center;background: #fa4c06;display: block;color: #fff;margin: 15px 0;border: none;" type="button" id="sm3" onclick="$('.rightform3').submit();" value="立即预约">
                          <!-- <a href="#">免费预约</a> -->
                        </div>
                        </form>
                        <p class="warn">为了您的利益以及我们的口碑，您的隐私将被严格保密。</p>
                    </div>
                </div>
            </div>
        </div>
   </div>
</div>
<!--*********************contanier 内容区 end *********************-->




<!--*********************footer 引入区*********************-->
<include file="common/foot" />
<!--*********************footer 引入区 end*********************-->
<script src="__JS__/jquery.validate.js" type="text/javascript"></script>
<script src="__JS__/jquery-ui.min.js"></script>
<link rel="stylesheet" media="screen" href="__CSS__/jquery-ui.min.css">
<script>
$.validator.setDefaults({
  submitHandler: function() {
  },
  showErrors: function(map, list) {
    var focussed = document.activeElement;
    if (focussed && $(focussed).is("input, textarea")) {
      $(this.currentForm).tooltip("close", {
        currentTarget: focussed
      }, true)
    }
    this.currentElements.removeAttr("title").removeClass("ui-state-highlight");
    $.each(list, function(index, error) {
      $(error.element).attr("title", error.message).addClass("ui-state-highlight");
    });
    if (focussed && $(focussed).is("input, textarea")) {
      $(this.currentForm).tooltip("open", {
        target: focussed
      });
    }
  }
});
// 手机号码验证
jQuery.validator.addMethod("isMobile", function(value, element) {
  var length = value.length;
  var mobile = /^1[3|4|5|8|7][0-9]\d{8}$/;
  return this.optional(element) || (length == 11 && mobile.test(value));
}, "请正确填写您的手机号码");

(function() {
  $(".rightform1,.rightform2,.rightform3").tooltip({
    show: false,
    hide: false
  });
  $(".rightform1").validate({
    submitHandler: function(form){ 
      //$(form).ajaxSubmit();  

        var formParam = $(form).serialize();//序列化表格内容为字符串  
              //alert(formParam);
              $('#sm1').val('提交中');
        $.ajax({    
            type:'post',        
            url:'{:U("Share/apply")}',    
            data:formParam,    
            cache:false,    
            dataType:'json',    
            success:function(data){   
                if( data.status == 's' ) { 
                    $('#sm1').val('免费预约');
                    alert('请勿重复提交');
                    exit;
                }
                 var num = $('#formnum1').text();
                 var nnum = parseInt(num) +1;
                 $('#formnum1').text(nnum);

                // alert(num);
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                //alert(XMLHttpRequest.status);
                //alert(XMLHttpRequest.readyState);
                //alert(textStatus);
                alert('提交失败');
            },
            complete:function(){
                $('#sm1').val('提交成功');
            }  
        });  
        //alert("formParam");    
    },     
    rules: {
        username: {
          required: true,
          rangelength: [2,6]
        },
        telephone: { 
            required:true, 
            isMobile:true 
        },
        community: {
          required: true,
          rangelength: [1,20]
        },
        area: {
          required : true,
          digits : true,
        },
        requirement: {
          rangelength: [0, 100]
        }

    },
    messages: {
        username: {
          required: "请输入您的姓名",
          rangelength: '输入内容为{0}-{1}个字符'
        },
        telephone: {
            required: "请输入您的联系电话",
            isMobile: "请输入一个有效的联系电话"
        },
        community: {
          required: "请输入您的小区",
          rangelength: '输入内容为{0}-{1}个字符',
        },
        area: {
          required: '请输入您的面积',
          digits : '只能输入整数',
        },
        requirement: {
          rangelength: '输入内容为{0}-{1}个字符',
        }
    }
  });

  $(".rightform2").validate({
    submitHandler: function(form){ 
      //$(form).ajaxSubmit();  

        var formParam = $(form).serialize();//序列化表格内容为字符串  
              //alert(formParam);
              $('#sm2').val('提交中');
        $.ajax({    
            type:'post',        
            url:'{:U("Share/apply")}',    
            data:formParam,    
            cache:false,    
            dataType:'json',    
            success:function(data){   
                if( data.status == 's' ) { 
                    $('#sm2').val('立即申请');
                    alert('请勿重复提交');
                    exit;
                }
                 var num = $('#formnum2').text();
                 var nnum = parseInt(num) +1;
                 $('#formnum2').text(nnum);

                // alert(num);
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                //alert(XMLHttpRequest.status);
                //alert(XMLHttpRequest.readyState);
                //alert(textStatus);
                alert('提交失败');
            },
            complete:function(){
                $('#sm2').val('提交成功');
            }  
        });  
        //alert("formParam");    
    },     
    rules: {
        username: {
          required: true,
          rangelength: [2,6]
        },
        telephone: { 
            required:true, 
            isMobile:true 
        },
        community: {
          required: true,
          rangelength: [1,20]
        },
        area: {
          required : true,
          digits : true,
        },
        requirement: {
          rangelength: [0, 100]
        }

    },
    messages: {
        username: {
          required: "请输入您的姓名",
          rangelength: '输入内容为{0}-{1}个字符'
        },
        telephone: {
            required: "请输入您的联系电话",
            isMobile: "请输入一个有效的联系电话"
        },
        community: {
          required: "请输入您的小区",
          rangelength: '输入内容为{0}-{1}个字符',
        },
        area: {
          required: '请输入您的面积',
          digits : '只能输入整数',
        },
        requirement: {
          rangelength: '输入内容为{0}-{1}个字符',
        }
    }
  });

  $(".rightform3").validate({
    submitHandler: function(form){ 
      //$(form).ajaxSubmit();  

        var formParam = $(form).serialize();//序列化表格内容为字符串  
              //alert(formParam);
              $('#sm3').val('提交中');
        $.ajax({    
            type:'post',        
            url:'{:U("Share/apply")}',    
            data:formParam,    
            cache:false,    
            dataType:'json',    
            success:function(data){   
                if( data.status == 's' ) { 
                    $('#sm3').val('立即预约');
                    alert('请勿重复提交');
                    exit;
                }
                 var num = $('#formnum3').text();
                 var nnum = parseInt(num) +1;
                 $('#formnum3').text(nnum);

                // alert(num);
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                //alert(XMLHttpRequest.status);
                //alert(XMLHttpRequest.readyState);
                //alert(textStatus);
                alert('提交失败');
            },
            complete:function(){
                $('#sm3').val('提交成功');
            }  
        });  
        //alert("formParam");    
    },     
    rules: {
        username: {
          required: true,
          rangelength: [2,6]
        },
        telephone: { 
            required:true, 
            isMobile:true 
        },
        community: {
          required: true,
          rangelength: [1,20]
        },
        area: {
          required : true,
          digits : true,
        },
        requirement: {
          rangelength: [0, 100]
        }

    },
    messages: {
        username: {
          required: "请输入您的姓名",
          rangelength: '输入内容为{0}-{1}个字符'
        },
        telephone: {
            required: "请输入您的联系电话",
            isMobile: "请输入一个有效的联系电话"
        },
        community: {
          required: "请输入您的小区",
          rangelength: '输入内容为{0}-{1}个字符',
        },
        area: {
          required: '请输入您的面积',
          digits : '只能输入整数',
        },
        requirement: {
          rangelength: '输入内容为{0}-{1}个字符',
        }
    }
  });

})();


</script>

<script type="text/javascript">
//设计师列表【tab切换】
 $('.demo-TabName li').on('click',function(){
	tabDemo($(this));
 });
</script>


</body>
</html>
